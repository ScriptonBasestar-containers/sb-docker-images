# Ruby on Rails Development Environment Configuration
# Copy this file to .env and customize the values

# ====================
# Project Settings
# ====================
PROJECT_NAME=ruby-dev
TZ=Asia/Seoul

# ====================
# Port Configuration
# ====================
# Rails server port (host:container)
RAILS_PORT=8640:3000

# ====================
# Ruby Version
# ====================
# Ruby version to install
RUBY_VERSION=2.7

# ====================
# Rails Version
# ====================
# Rails version to install
RAILS_VERSION=7.0

# ====================
# Node.js Version
# ====================
# Node.js version for asset compilation
NODE_VERSION=18.x

# ====================
# User Configuration
# ====================
# Custom user inside container
CUSTOM_USER=devuser

# Custom user UID (match with host user for file permissions)
# CUSTOM_UID=1000

# Custom user GID
# CUSTOM_GID=1000

# ====================
# Docker Image Configuration
# ====================
# Docker repository name
DOCKER_REPONAME=archmagece

# Docker image name
DOCKER_IMGNAME=ruby-dev

# Docker image version (defaults to RUBY_VERSION)
DOCKER_IMGVERSION=${RUBY_VERSION}

# ====================
# Working Directory
# ====================
# Container working directory
WORKDIR=/work

# ====================
# Database Configuration (MySQL)
# ====================
# MySQL version
MYSQL_VERSION=8.4

# MySQL database name
MYSQL_DATABASE=app_development

# MySQL user
MYSQL_USER=rails

# MySQL password
MYSQL_PASSWORD=change-me-password

# MySQL root password
MYSQL_ROOT_PASSWORD=change-me-root-password

# MySQL host (for linking)
MYSQL_HOST=mysql

# ====================
# Rails Environment
# ====================
# Rails environment (development, test, production)
RAILS_ENV=development

# ====================
# Gem Configuration
# ====================
# Bundler jobs (parallel gem installation)
# BUNDLE_JOBS=4

# Bundler retry count
# BUNDLE_RETRY=3

# ====================
# Volume Paths (Local)
# ====================
# Application directory (local path)
APP_PATH=.

# Gem cache volume
# GEM_VOLUME=gempath

# ====================
# Container Names
# ====================
RUBY_CONTAINER_NAME=ruby-dev
MYSQL_CONTAINER_NAME=ruby-dev-mysql

# ====================
# Volume Names
# ====================
GEM_VOLUME=gempath
MYSQL_DATA_VOLUME=mysql-data

# ====================
# Network Names
# ====================
# NETWORK_NAME=ruby-dev-network

# ====================
# Additional Tools (Optional)
# ====================
# Install additional tools during build
# INSTALL_POSTGRES_CLIENT=true
# INSTALL_REDIS_CLIENT=true

# ====================
# Usage Examples
# ====================
# This file provides environment variable documentation for Ruby-dev.
#
# Build image:
# docker build \
#   --build-arg RUBY_VERSION=2.7 \
#   --build-arg CUSTOM_USER=developer \
#   -t ruby-dev .
#
# Run bash shell:
# docker run -it --rm \
#   -p 3000:3000 \
#   -v $(pwd):/work \
#   ruby-dev bash
#
# Run Rails server:
# docker run -it --rm \
#   -p 3000:3000 \
#   -v $(pwd):/work \
#   -v gempath:/usr/local/bundle \
#   --link mysql:mysql \
#   ruby-dev bash
# # Inside container:
# bundle install
# rails server -b 0.0.0.0
#
# Create new Rails app:
# docker run -it --rm \
#   -v $(pwd):/work \
#   ruby-dev bash
# # Inside container:
# rails new myapp --database=mysql
#
# Run with Docker Compose:
# docker compose up -d
# docker compose exec ruby-dev bash
#
# Database setup:
# docker compose exec ruby-dev bash
# # Inside container:
# rails db:create
# rails db:migrate
# rails db:seed
#
# Run tests:
# docker compose exec ruby-dev bash
# # Inside container:
# bundle exec rspec
# bundle exec rails test
#
# Install gems:
# docker compose exec ruby-dev bash
# # Inside container:
# bundle install
#
# Run console:
# docker compose exec ruby-dev rails console
#
# ====================
# Security Note
# ====================
# ⚠️ Security recommendations:
# - Use specific Ruby/Rails versions for reproducibility
# - Change default database passwords
# - Don't commit .env to version control
# - Use Rails credentials for secrets
# - Regular gem updates for security patches
# - Use Bundler audit for vulnerability scanning
#
# Rails credentials usage:
# - Edit credentials:
#   rails credentials:edit
#
# - Access in code:
#   Rails.application.credentials.secret_key_base
#
# Gem vulnerability scanning:
# - Install bundler-audit:
#   gem install bundler-audit
#
# - Run audit:
#   bundle audit check --update
#
# Directory structure:
# myapp/
# ├── app/
# │   ├── controllers/
# │   ├── models/
# │   └── views/
# ├── config/
# │   ├── database.yml
# │   ├── routes.rb
# │   └── credentials.yml.enc
# ├── db/
# │   ├── migrate/
# │   └── seeds.rb
# ├── Gemfile
# └── Gemfile.lock
#
# Useful commands inside container:
# - rails new APP_NAME
# - rails generate controller NAME
# - rails generate model NAME
# - rails db:migrate
# - rails routes
# - rails console
# - bundle install
# - bundle update
#
# References:
# - Ruby documentation: https://www.ruby-lang.org/
# - Rails guides: https://guides.rubyonrails.org/
# - Port guide: ../docs/PORT_GUIDE.md
