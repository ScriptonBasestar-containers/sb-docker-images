# Buildbox Environment Configuration
# Reusable Docker Compose Templates Collection
# Copy this file to .env and customize the values

# ====================
# Project Settings
# ====================
PROJECT_NAME=buildbox
TZ=Asia/Seoul

# ====================
# PostgreSQL Configuration
# ====================
# PostgreSQL version
POSTGRES_VERSION=15-alpine

# PostgreSQL database name
POSTGRES_DB=app_db

# PostgreSQL user
POSTGRES_USER=postgres

# PostgreSQL password
POSTGRES_PASSWORD=change-me-strong-password

# PostgreSQL port
POSTGRES_PORT=5432

# ====================
# MariaDB Configuration
# ====================
# MariaDB version
MARIADB_VERSION=11.8

# MariaDB root password
MYSQL_ROOT_PASSWORD=change-me-root-password

# MariaDB database
MYSQL_DATABASE=app_db

# MariaDB user
MYSQL_USER=app_user

# MariaDB password
MYSQL_PASSWORD=change-me-strong-password

# MariaDB port
MYSQL_PORT=3306

# ====================
# Redis Configuration
# ====================
# Redis version
REDIS_VERSION=8.2-alpine

# Redis port
REDIS_PORT=6379

# Redis password (optional)
# REDIS_PASSWORD=change-me-redis-password

# ====================
# Ory Kratos Configuration
# ====================
# Kratos public API port
KRATOS_PUBLIC_PORT=4433

# Kratos admin API port
KRATOS_ADMIN_PORT=4434

# Kratos UI port
KRATOS_UI_PORT=4455

# Kratos database DSN
# SQLite (default):
KRATOS_DSN=sqlite:///var/lib/sqlite/db.sqlite?_fk=true&mode=rwc

# PostgreSQL:
# KRATOS_DSN=postgres://kratos:secret@postgres:5432/kratos?sslmode=disable

# Kratos secret
KRATOS_SECRETS_DEFAULT=change-me-secret-min-32-chars
KRATOS_SECRETS_COOKIE=change-me-cookie-secret-32

# Kratos URLs
KRATOS_BROWSER_URL=http://127.0.0.1:4433/
KRATOS_PUBLIC_URL=http://kratos:4433/

# ====================
# Authelia Configuration
# ====================
# Authelia port
AUTHELIA_PORT=9091

# Authelia JWT secret
AUTHELIA_JWT_SECRET=change-me-jwt-secret-min-32-chars

# Authelia session secret
AUTHELIA_SESSION_SECRET=change-me-session-secret-32

# Authelia encryption key
AUTHELIA_ENCRYPTION_KEY=change-me-encryption-key-32

# ====================
# MailSlurper Configuration
# ====================
# MailSlurper SMTP port
MAILSLURPER_SMTP_PORT=2500

# MailSlurper web UI port
MAILSLURPER_UI_PORT=8080

# MailSlurper API port
MAILSLURPER_API_PORT=8085

# ====================
# MailHog Configuration
# ====================
# MailHog SMTP port
MAILHOG_SMTP_PORT=1025

# MailHog web UI port
MAILHOG_UI_PORT=8025

# ====================
# Network Configuration
# ====================
# Base network names
APP_NETWORK_NAME=app-network
INTRA_NETWORK_NAME=intra-network
DATA_NETWORK_NAME=data-network

# ====================
# Volume Names
# ====================
POSTGRES_DATA_VOLUME=postgres-data
MARIADB_DATA_VOLUME=mariadb-data
REDIS_DATA_VOLUME=redis-data
KRATOS_SQLITE_VOLUME=kratos-sqlite

# ====================
# Container Names
# ====================
POSTGRES_CONTAINER_NAME=buildbox-postgres
MARIADB_CONTAINER_NAME=buildbox-mariadb
REDIS_CONTAINER_NAME=buildbox-redis
KRATOS_CONTAINER_NAME=buildbox-kratos
KRATOS_MIGRATE_CONTAINER_NAME=buildbox-kratos-migrate
AUTHELIA_CONTAINER_NAME=buildbox-authelia
MAILSLURPER_CONTAINER_NAME=buildbox-mailslurper
MAILHOG_CONTAINER_NAME=buildbox-mailhog

# ====================
# Usage Examples
# ====================
# Buildbox provides reusable Docker Compose templates for common infrastructure services.
# Use these templates in your projects by combining them as needed.
#
# Single service:
# docker compose -f compose/compose.postgres.yml up -d
#
# Multiple services:
# docker compose \
#   -f compose/compose.base-network.yml \
#   -f compose/compose.postgres.yml \
#   -f compose/compose.redis.yml \
#   up -d
#
# With your app:
# docker compose \
#   -f compose/compose.base-network.yml \
#   -f compose/compose.postgres.yml \
#   -f your-app-compose.yml \
#   up -d
#
# Using in your project's docker-compose.yml:
# networks:
#   app-network:
#     external: true
#     name: app-network
#
# Available templates:
# - compose.base-network.yml: Network definitions
# - compose.postgres.yml: PostgreSQL database
# - compose.bn-pg15.yml: PostgreSQL 15 with base-network
# - compose.mariadb.yml: MariaDB database
# - compose.redis.yml: Redis cache
# - compose.bn-redis.yml: Redis with base-network
# - compose.kratos.yml: Ory Kratos auth (full)
# - compose.kratos-standalone.yml: Ory Kratos (standalone)
# - compose.kratos-pg.yml: Kratos with PostgreSQL
# - compose.ory-kratos.yml: Complete Kratos setup
# - compose.authelia.yml: Authelia SSO
# - compose.mailslurper.yml: Mail testing (MailSlurper)
# - compose.mailhog.yml: Mail testing (MailHog)
#
# ====================
# Security Note
# ====================
# ⚠️ IMPORTANT: Change all secrets before using in production!
# - Database passwords (POSTGRES_PASSWORD, MYSQL_ROOT_PASSWORD, MYSQL_PASSWORD)
# - Redis password (if enabled)
# - Kratos secrets (KRATOS_SECRETS_DEFAULT, KRATOS_SECRETS_COOKIE)
# - Authelia secrets (JWT, session, encryption)
#
# Security recommendations:
# - Use strong, random passwords and secrets
# - Enable network isolation (use base-network)
# - Configure proper firewall rules
# - Enable SSL/TLS for production
# - Regular security updates
# - Use secrets management (Docker secrets, Vault)
# - Backup databases regularly
#
# Generate random secrets:
# openssl rand -base64 32
#
# Network isolation strategy:
# - app-network: Application layer (frontend, backend)
# - intra-network: Internal services communication
# - data-network: Database and cache layer
#
# Service combination examples:
#
# 1. Web app with PostgreSQL and Redis:
#    docker compose -f compose/compose.base-network.yml \
#                   -f compose/compose.bn-pg15.yml \
#                   -f compose/compose.bn-redis.yml up -d
#
# 2. Auth system with Kratos and PostgreSQL:
#    docker compose -f compose/compose.base-network.yml \
#                   -f compose/compose.kratos-pg.yml up -d
#
# 3. Development with mail testing:
#    docker compose -f compose/compose.mailslurper.yml up -d
#
# 4. Full stack (DB + Cache + Auth + Mail):
#    docker compose -f compose/compose.base-network.yml \
#                   -f compose/compose.bn-pg15.yml \
#                   -f compose/compose.bn-redis.yml \
#                   -f compose/compose.kratos.yml \
#                   -f compose/compose.mailslurper.yml up -d
#
# Configuration files location:
# - Authelia config: config/authelia/
# - Kratos config: config/kratos/
#
# Utility scripts:
# - bin/: Helper scripts for common tasks
#
# References:
# - PostgreSQL: https://www.postgresql.org/docs/
# - MariaDB: https://mariadb.org/documentation/
# - Redis: https://redis.io/documentation
# - Ory Kratos: https://www.ory.sh/docs/kratos/
# - Authelia: https://www.authelia.com/
# - MailSlurper: https://github.com/mailslurper/mailslurper
# - MailHog: https://github.com/mailhog/MailHog
