# PostgreSQL Extensions Environment Configuration
# Copy this file to .env and customize the values

# ====================
# Project Settings
# ====================
PROJECT_NAME=postgres-exts
TZ=Asia/Seoul

# ====================
# Build Configuration
# ====================
# PostgreSQL major version
PG_MAJOR=16

# PostgreSQL version (full)
PG_VERSION=16.6

# ====================
# Extension Versions
# ====================
# pgvector version
PGVECTOR_VERSION=0.7.4

# PostGIS version
POSTGIS_VERSION=3.5.1

# TimescaleDB version
TIMESCALEDB_VERSION=2.17.2

# pg_cron version
PG_CRON_VERSION=1.6.4

# pg_repack version
PG_REPACK_VERSION=1.5.1

# pgAudit version
PGAUDIT_VERSION=16.0

# pg_partman version
PG_PARTMAN_VERSION=5.2.1

# ====================
# Image Configuration
# ====================
# Base image
BASE_IMAGE=ghcr.io/cloudnative-pg/postgresql:16

# Image registry (for pushing custom images)
# REGISTRY=docker.io/yourusername
# IMAGE_NAME=postgres-cnpg-extensions
# IMAGE_TAG=16-latest

# ====================
# Build Options
# ====================
# Build type (essential, extensions, vector)
BUILD_TYPE=essential

# Enable build cache
# DOCKER_BUILDKIT=1

# ====================
# CloudNativePG Configuration
# ====================
# Cluster name
CLUSTER_NAME=postgres-cluster

# Number of instances
CLUSTER_INSTANCES=3

# Storage size
CLUSTER_STORAGE_SIZE=10Gi

# Storage class
# CLUSTER_STORAGE_CLASS=standard

# ====================
# PostgreSQL Configuration
# ====================
# Database name
POSTGRES_DB=app_db

# Database user
POSTGRES_USER=app_user

# Database password
POSTGRES_PASSWORD=change-me-strong-password

# Superuser password
POSTGRES_SUPERUSER_PASSWORD=change-me-super-password

# ====================
# Performance Tuning
# ====================
# Shared buffers (% of available memory or absolute value)
# SHARED_BUFFERS=25%

# Max connections
# MAX_CONNECTIONS=100

# Work mem
# WORK_MEM=4MB

# ====================
# Extension-Specific Settings
# ====================
# Enable pg_stat_statements
SHARED_PRELOAD_LIBRARIES=pg_stat_statements

# pgvector settings
# PGVECTOR_MAX_DIMENSIONS=2000

# TimescaleDB settings
# TIMESCALEDB_TELEMETRY=off

# ====================
# Security Note
# ====================
# ⚠️ IMPORTANT: Change all passwords before using in production!
# - POSTGRES_PASSWORD: Application user password
# - POSTGRES_SUPERUSER_PASSWORD: Superuser password
#
# Security recommendations:
# - Use strong, random passwords
# - Enable SSL/TLS for connections
# - Configure pg_hba.conf properly
# - Enable pgAudit for compliance requirements
# - Regular security updates
# - Backup encryption
#
# CloudNativePG features:
# - Automatic failover
# - Point-in-time recovery
# - Rolling updates
# - Backup to S3/Azure/GCS
# - Monitoring integration

# ====================
# Build Commands
# ====================
# Build essential image:
# make essential-build
#
# Build full extensions image:
# make extensions-build
#
# Build vector only image:
# make vector-build
#
# Push to registry:
# docker tag <image> ${REGISTRY}/${IMAGE_NAME}:${IMAGE_TAG}
# docker push ${REGISTRY}/${IMAGE_NAME}:${IMAGE_TAG}
