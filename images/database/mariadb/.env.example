# MariaDB Backup System Environment Configuration
# Copy this file to .env and customize the values

# ====================
# Project Settings
# ====================
PROJECT_NAME=mariadb-backup
TZ=Asia/Seoul

# ====================
# MariaDB Connection Settings
# ====================
# MariaDB host (hostname or IP)
MYSQL_HOST=mariadb
MYSQL_PORT=3306

# Backup user credentials
MYSQL_USER=backup_user
MYSQL_PASSWORD=backup_password

# Database to backup (comma-separated for multiple, or 'all' for all databases)
MYSQL_DATABASE=all

# ====================
# Backup Configuration
# ====================
# Backup schedule (cron format)
# Default: Daily at 2 AM
BACKUP_CRON=0 2 * * *

# Backup retention policy
BACKUP_KEEP_DAYS=7
BACKUP_KEEP_WEEKS=4
BACKUP_KEEP_MONTHS=12

# ====================
# Restic Configuration
# ====================
# Restic repository password
RESTIC_PASSWORD=change-me-strong-password

# Restic repository location
# Examples:
# - Local: /backup
# - SFTP: sftp:user@host:/path
# - S3: s3:s3.amazonaws.com/bucket-name
# - B2: b2:bucket-name
RESTIC_REPOSITORY=/backup

# Optional: AWS credentials for S3
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key

# Optional: B2 credentials
# B2_ACCOUNT_ID=your-account-id
# B2_ACCOUNT_KEY=your-account-key

# ====================
# Rclone Configuration
# ====================
# Rclone remote name (from rclone.conf)
RCLONE_REMOTE=myremote

# Rclone remote path
RCLONE_PATH=backup/mariadb

# Bandwidth limit (e.g., 10M for 10 MB/s)
RCLONE_BWLIMIT=0

# ====================
# Container Names
# ====================
BACKUP_CONTAINER_NAME=mariadb-backup

# ====================
# Volume Names
# ====================
BACKUP_DATA_VOLUME=mariadb-backup-data
RCLONE_CONFIG_VOLUME=rclone-config

# ====================
# Security Note
# ====================
# ⚠️ IMPORTANT: Change all passwords and keys before using in production!
# - MYSQL_PASSWORD: MariaDB backup user password
# - RESTIC_PASSWORD: Restic repository encryption password
# - AWS credentials or other cloud storage credentials
#
# Security recommendations:
# - Use a dedicated backup user with minimal privileges
# - Store credentials securely (consider using Docker secrets)
# - Enable encryption for backups (Restic does this by default)
# - Test restore procedures regularly
# - Monitor backup success/failure
# - Keep backup credentials separate from database credentials
#
# Required MariaDB permissions for backup user:
# GRANT SELECT, RELOAD, LOCK TABLES, REPLICATION CLIENT ON *.* TO 'backup_user'@'%';
