# Redis Standalone Environment Configuration
# Copy this file to .env and customize the values

# ====================
# Project Settings
# ====================
PROJECT_NAME=redis
TZ=Asia/Seoul

# ====================
# Port Configuration
# ====================
REDIS_PORT=6379

# ====================
# Docker Image
# ====================
# Available tags: 7-alpine, 7, 6-alpine, 6
REDIS_TAG=7-alpine

# ====================
# Redis Configuration
# ====================
# Redis password (⚠️ CHANGE THIS!)
REDIS_PASSWORD=change-me-strong-password

# Enable AOF (Append Only File) persistence
# Options: yes, no
REDIS_AOF=yes

# Maximum memory limit
# Examples: 256mb, 512mb, 1gb, 2gb
REDIS_MAX_MEMORY=256mb

# Memory eviction policy
# Options: noeviction, allkeys-lru, volatile-lru, allkeys-random, volatile-random, volatile-ttl
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# ====================
# Container Names
# ====================
REDIS_CONTAINER_NAME=redis

# ====================
# Network Names
# ====================
CACHE_NETWORK=cache-network

# ====================
# Volume Names
# ====================
REDIS_DATA_VOLUME=redis-data

# ====================
# Security Notes
# ====================
# ⚠️  IMPORTANT Security Recommendations:
#
# 1. Change Default Password:
#    - Generate strong password: openssl rand -base64 32
#    - Update REDIS_PASSWORD before first run
#    - Never use weak passwords in production
#
# 2. Network Security:
#    - Bind to localhost only in production (not exposed to internet)
#    - Use firewall to restrict access
#    - Consider using Redis ACL for granular permissions
#
# 3. TLS/SSL:
#    - Enable TLS for encrypted connections in production
#    - Use redis:7 (not alpine) for TLS support
#
# 4. Persistence:
#    - AOF provides better durability than RDB
#    - Configure fsync policy based on your needs:
#      * appendfsync always: Slowest, safest
#      * appendfsync everysec: Good balance (default)
#      * appendfsync no: Fastest, least safe
#
# 5. Regular Backups:
#    - Schedule regular backups: make backup
#    - Test restore procedure regularly
#    - Store backups securely off-site
#
# 6. Monitoring:
#    - Monitor memory usage: make info
#    - Watch for slow queries: make monitor
#    - Set up alerts for memory pressure
#
# 7. Resource Limits:
#    - Set appropriate maxmemory based on available RAM
#    - Choose eviction policy based on use case
#    - Monitor evicted keys metric

# ====================
# Memory Eviction Policies
# ====================
# noeviction:       Return error when memory limit is reached
# allkeys-lru:      Evict any key using LRU (Least Recently Used)
# volatile-lru:     Evict keys with TTL using LRU
# allkeys-random:   Evict random keys
# volatile-random:  Evict random keys with TTL
# volatile-ttl:     Evict keys with nearest TTL
#
# Recommendation:
# - Cache: allkeys-lru (default in this config)
# - Session store: allkeys-lru or volatile-lru
# - Queue: noeviction

# ====================
# Usage Examples
# ====================
# Start Redis:
#   make up
#
# Test connection:
#   make ping
#
# Access Redis CLI:
#   make cli
#
# Set/Get values:
#   SET mykey "Hello"
#   GET mykey
#
# Monitor commands:
#   make monitor
#
# View Redis info:
#   make info
#
# Backup data:
#   make backup

# ====================
# Common Redis Commands
# ====================
# String operations:
#   SET key value
#   GET key
#   INCR counter
#   EXPIRE key seconds
#
# List operations:
#   LPUSH list value
#   RPUSH list value
#   LRANGE list 0 -1
#
# Set operations:
#   SADD set member
#   SMEMBERS set
#
# Hash operations:
#   HSET hash field value
#   HGET hash field
#   HGETALL hash
#
# Sorted Set operations:
#   ZADD sortedset score member
#   ZRANGE sortedset 0 -1
#
# Pub/Sub:
#   PUBLISH channel message
#   SUBSCRIBE channel

# ====================
# Performance Tuning
# ====================
# For high-performance scenarios:
#
# 1. Disable persistence (cache-only):
#    REDIS_AOF=no
#    # Also disable RDB in redis.conf
#
# 2. Increase maxmemory:
#    REDIS_MAX_MEMORY=2gb
#
# 3. Use appropriate data structures:
#    - Strings: Simple key-value
#    - Hashes: Objects with multiple fields
#    - Sets: Unique items
#    - Sorted Sets: Ranked items
#    - Lists: Queues, stacks
#
# 4. Use pipelining for bulk operations
#
# 5. Avoid KEYS command in production (use SCAN instead)

# ====================
# References
# ====================
# - Redis: https://redis.io/
# - Documentation: https://redis.io/docs/
# - Commands: https://redis.io/commands/
# - Data Types: https://redis.io/docs/data-types/
# - Persistence: https://redis.io/docs/management/persistence/
# - Port guide: ../../docs/PORT_STATUS.md
