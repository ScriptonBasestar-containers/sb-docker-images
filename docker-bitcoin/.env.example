# Bitcoin Core Environment Configuration
# Copy this file to .env and customize the values

# ====================
# Project Settings
# ====================
PROJECT_NAME=bitcoin
TZ=Asia/Seoul

# ====================
# Port Configuration
# ====================
# Bitcoin RPC port
BITCOIN_RPC_PORT=8332

# Bitcoin P2P network port
BITCOIN_P2P_PORT=8333

# BTC Explorer web UI port
BTC_EXPLORER_PORT=3002

# ====================
# Bitcoin Core Configuration
# ====================
# RPC authentication username
RPC_USER=bitcoin

# RPC authentication password (change in production!)
RPC_PASSWORD=change-me-strong-password

# Network mode (0=mainnet, 1=testnet, 2=regtest)
TESTNET=0

# ====================
# Bitcoin Core Advanced Settings (Optional)
# ====================
# Maximum connections
# BITCOIN_MAX_CONNECTIONS=125

# Database cache size (MB)
# BITCOIN_DB_CACHE=450

# Transaction index (0=disabled, 1=enabled)
# BITCOIN_TXINDEX=0

# Prune mode (0=disabled, >550=enabled with MB limit)
# BITCOIN_PRUNE=0

# ====================
# BTC RPC Explorer Configuration
# ====================
# Explorer host
BTCEXP_HOST=0.0.0.0

# Explorer port
BTCEXP_PORT=3002

# Bitcoin daemon host
BTCEXP_BITCOIND_HOST=bitcoind

# Bitcoin daemon RPC port
BTCEXP_BITCOIND_PORT=8332

# Bitcoin daemon RPC user
BTCEXP_BITCOIND_USER=${RPC_USER}

# Bitcoin daemon RPC password
BTCEXP_BITCOIND_PASS=${RPC_PASSWORD}

# Privacy mode (true=hide sensitive data)
BTCEXP_PRIVACY_MODE=false

# Disable exchange rates (true/false)
BTCEXP_NO_RATES=false

# ====================
# Container Names
# ====================
BITCOIND_CONTAINER_NAME=bitcoind
BTC_EXPLORER_CONTAINER_NAME=btc-explorer

# ====================
# Volume Names
# ====================
BITCOIN_DATA_VOLUME=bitcoin-data

# ====================
# Network Names
# ====================
NETWORK_NAME=bitcoin-network

# ====================
# Security Note
# ====================
# ⚠️ IMPORTANT: Change RPC credentials before using!
# - RPC_PASSWORD: Strong password for RPC authentication
#
# Security recommendations:
# - Use strong RPC password
# - Restrict RPC access (rpcallowip)
# - Use HTTPS for remote RPC access
# - Enable wallet encryption
# - Regular backups of wallet and blockchain data
# - Keep Bitcoin Core updated
# - Use hardware wallet for production
# - Secure private keys properly
#
# Network modes:
# - TESTNET=0: Bitcoin mainnet (real money!)
# - TESTNET=1: Bitcoin testnet (test coins)
# - Regtest: Private regression test network
#
# Initial setup:
# 1. Copy this file to .env
# 2. Change RPC_PASSWORD to a strong password
# 3. Choose network mode (TESTNET)
# 4. Start services: docker compose up -d
# 5. Wait for blockchain sync (can take days for mainnet)
# 6. Access Explorer: http://localhost:3002
#
# Bitcoin CLI usage:
# docker compose exec bitcoind bitcoin-cli \
#   -rpcuser=bitcoin \
#   -rpcpassword=YOUR_PASSWORD \
#   getblockchaininfo
#
# Common bitcoin-cli commands:
# - getblockchaininfo: Get blockchain sync status
# - getnetworkinfo: Get network information
# - getwalletinfo: Get wallet information
# - createwallet "name": Create new wallet
# - getnewaddress: Generate new Bitcoin address
# - getbalance: Check wallet balance
# - sendtoaddress <address> <amount>: Send Bitcoin
# - listunspent: List unspent outputs
# - getrawtransaction <txid> true: Get transaction details
#
# Wallet management:
# 1. Create wallet:
#    docker compose exec bitcoind bitcoin-cli -rpcuser=bitcoin -rpcpassword=PASSWORD createwallet "mywallet"
#
# 2. Encrypt wallet:
#    docker compose exec bitcoind bitcoin-cli -rpcuser=bitcoin -rpcpassword=PASSWORD encryptwallet "WALLET_PASSPHRASE"
#
# 3. Backup wallet:
#    docker compose exec bitcoind bitcoin-cli -rpcuser=bitcoin -rpcpassword=PASSWORD backupwallet /bitcoin/.bitcoin/wallet_backup.dat
#
# 4. List wallets:
#    docker compose exec bitcoind bitcoin-cli -rpcuser=bitcoin -rpcpassword=PASSWORD listwallets
#
# Blockchain sync:
# - Mainnet: ~500GB+ (as of 2025), takes days to sync
# - Testnet: ~40GB+, faster sync
# - Regtest: Instant, no sync needed
#
# Pruned mode (to save disk space):
# - Add to bitcoind command: -prune=550
# - Keeps only ~550MB of blockchain data
# - Cannot serve full blockchain to other nodes
#
# Development/Testing:
# For development, use regtest mode:
# 1. Create docker-compose.override.yml:
#    services:
#      bitcoind:
#        command: bitcoind -regtest -rpcuser=bitcoin -rpcpassword=PASSWORD
#
# 2. Generate blocks:
#    docker compose exec bitcoind bitcoin-cli -regtest -rpcuser=bitcoin -rpcpassword=PASSWORD generatetoaddress 101 <address>
#
# Monitoring:
# - Blockchain sync progress: getblockchaininfo
# - Network connections: getpeerinfo
# - Memory pool: getmempoolinfo
# - Node uptime: uptime
#
# BTC Explorer features:
# - Browse blocks and transactions
# - Search by address, transaction, or block
# - View mempool status
# - Network statistics
# - Charts and graphs
#
# Backup strategy:
# 1. Regular wallet backups
# 2. Save wallet seed/recovery phrase
# 3. Backup bitcoin.conf
# 4. Consider using hardware wallet
#
# References:
# - Bitcoin Core: https://bitcoincore.org/
# - Bitcoin CLI: https://developer.bitcoin.org/reference/rpc/
# - BTC Explorer: https://github.com/janoside/btc-rpc-explorer
# - Port guide: ../docs/PORT_GUIDE.md
