# Misago Environment Configuration
# Copy this file to .env and customize the values

# ====================
# Project Settings
# ====================
PROJECT_NAME=misago
TZ=Asia/Seoul

# ====================
# Port Configuration
# ====================
# Nginx proxy HTTP port
NGINX_HTTP_PORT=8260

# Nginx proxy HTTPS port
NGINX_HTTPS_PORT=8443

# ====================
# Database Configuration (PostgreSQL)
# ====================
# PostgreSQL host
MISAGO_POSTGRES_HOST=postgres

# PostgreSQL database name
MISAGO_POSTGRES_DB=db01

# PostgreSQL user
MISAGO_POSTGRES_USER=user01

# PostgreSQL password (change in production!)
MISAGO_POSTGRES_PASSWORD=change-me-strong-password

# ====================
# Django Configuration
# ====================
# Secret key for Django (change in production!)
SECRET_KEY=change-this-to-a-random-secret-key

# Debug mode (NEVER use True in production!)
DEBUG=False

# Allowed hosts (comma-separated)
ALLOWED_HOSTS=localhost,127.0.0.1

# ====================
# Database URL
# ====================
# Full database connection URL
DATABASE_URL=postgres://user01:change-me-strong-password@postgres:5432/db01

# ====================
# Redis Configuration
# ====================
# Redis connection URL
REDIS_URL=redis://redis:6379/0

# ====================
# Email Configuration
# ====================
# SMTP server
EMAIL_HOST=smtp.gmail.com

# SMTP port
EMAIL_PORT=587

# Use TLS
EMAIL_USE_TLS=True

# Use SSL
EMAIL_USE_SSL=False

# SMTP username
EMAIL_HOST_USER=your-email@gmail.com

# SMTP password
EMAIL_HOST_PASSWORD=your-app-password

# Default from email
DEFAULT_FROM_EMAIL=noreply@example.com

# ====================
# Site Configuration
# ====================
# Site name
SITE_NAME=My Forum

# Site domain
SITE_DOMAIN=forum.example.com

# Site protocol (http or https)
SITE_PROTOCOL=http

# ====================
# Nginx Proxy Configuration
# ====================
# Enable IPv6
ENABLE_IPV6=true

# SSL policy (Mozilla-Modern, Mozilla-Intermediate, Mozilla-Old, AWS-TLS-1-2-2017-01, AWS-2016-08)
SSL_POLICY=Mozilla-Modern

# Virtual protocol
VIRTUAL_PROTO=uwsgi

# ====================
# Celery Configuration
# ====================
# Celery broker URL (uses Redis)
CELERY_BROKER_URL=redis://redis:6379/0

# Celery result backend
CELERY_RESULT_BACKEND=redis://redis:6379/0

# ====================
# Media and Static Files
# ====================
# Media files URL
# MEDIA_URL=/media/

# Static files URL
# STATIC_URL=/static/

# ====================
# Container Names
# ====================
NGINX_PROXY_CONTAINER_NAME=misago-nginx-proxy
POSTGRES_CONTAINER_NAME=misago-postgres
REDIS_CONTAINER_NAME=misago-redis
MISAGO_CONTAINER_NAME=misago
CELERY_WORKER_CONTAINER_NAME=misago-celery-worker

# ====================
# Volume Names
# ====================
NGINX_CERTS_VOLUME=nginx-certs
NGINX_HTML_VOLUME=nginx-html
POSTGRES_DATA_VOLUME=misago-postgres-15
REDIS_DATA_VOLUME=misago-redis-6

# ====================
# Network Names
# ====================
# NETWORK_NAME=misago-network

# ====================
# Security Note
# ====================
# ⚠️ IMPORTANT: Change all secrets before using in production!
# - SECRET_KEY: Django secret key
# - MISAGO_POSTGRES_PASSWORD: Database password
# - EMAIL_HOST_PASSWORD: SMTP password
# - DEBUG: Set to False in production
#
# Security recommendations:
# - Use strong, random passwords
# - Enable HTTPS with SSL certificates
# - Set DEBUG=False in production
# - Configure allowed hosts properly
# - Use environment-specific .env files
# - Regular security updates
# - Backup configuration
# - Firewall settings
# - Configure rate limiting
#
# Generate random secret key:
# python -c "import secrets; print(secrets.token_urlsafe(50))"
#
# Initial setup:
# 1. Copy this file to .env and update all values
# 2. Build images if needed: docker compose build
# 3. Start services: docker compose up -d
# 4. Run migrations: docker compose exec misago python manage.py migrate
# 5. Create superuser: docker compose exec misago python manage.py createsuperuser
# 6. Collect static files: docker compose exec misago python manage.py collectstatic --noinput
# 7. Access: http://localhost:8260 (or your configured port)
#
# Gmail SMTP setup:
# 1. Enable 2-factor authentication in Google account
# 2. Generate app-specific password
# 3. Use app password as EMAIL_HOST_PASSWORD
#
# Admin panel:
# URL: http://localhost:8260/admincp/
#
# SSL/TLS setup:
# - Use Let's Encrypt with nginx-proxy companion
# - Configure domain in SITE_DOMAIN
# - Set SITE_PROTOCOL=https
#
# References:
# - Misago documentation: https://misago-project.org/
# - Port guide: ../docs/PORT_GUIDE.md
