# Chef Development Environment Configuration
# Copy this file to .env and customize the values

# ====================
# Project Settings
# ====================
PROJECT_NAME=chef-dev
TZ=Asia/Seoul

# ====================
# Chef Version
# ====================
# Chef DK version to use
CHEF_VERSION=3.4.28

# ====================
# User Configuration
# ====================
# Custom user inside container
CUSTOM_USER=devuser

# Custom user password (same as username by default)
# CUSTOM_USER_PASSWORD=devuser

# ====================
# Docker Image Configuration
# ====================
# Docker repository name
DOCKER_REPONAME=archmagece

# Docker image name
DOCKER_IMGNAME=chef-dev

# Docker image version (defaults to CHEF_VERSION)
DOCKER_IMGVERSION=${CHEF_VERSION}

# ====================
# Working Directory
# ====================
# Container working directory
WORKDIR=/work

# ====================
# Volume Paths (Local)
# ====================
# Cookbooks directory (local path)
COOKBOOKS_PATH=./cookbooks

# Chef repository directory (local path)
# CHEF_REPO_PATH=./chef-repo

# Data bags directory (local path)
# DATA_BAGS_PATH=./data_bags

# ====================
# Port Configuration (Optional)
# ====================
# Ports for testing applications
# TEST_APP_PORT=8080

# ====================
# Chef Configuration (Optional)
# ====================
# Chef server URL (for Chef Server mode)
# CHEF_SERVER_URL=https://chef-server.example.com

# Validation client name
# CHEF_VALIDATION_CLIENT_NAME=chef-validator

# Node name
# CHEF_NODE_NAME=my-node

# ====================
# Knife Configuration (Optional)
# ====================
# Knife configuration file path
# KNIFE_CONFIG=/work/.chef/knife.rb

# ====================
# Test Kitchen Configuration (Optional)
# ====================
# Kitchen driver (docker, vagrant, etc.)
# KITCHEN_DRIVER=docker

# Kitchen provisioner
# KITCHEN_PROVISIONER=chef_zero

# ====================
# Container Configuration
# ====================
# Container name (for docker run)
CHEF_CONTAINER_NAME=chef-dev

# Image name
CHEF_IMAGE_NAME=chef-dev:${CHEF_VERSION}

# ====================
# Usage Examples
# ====================
# This file provides environment variable documentation for Chef-dev.
# Chef-dev is typically run interactively for cookbook development.
#
# Basic usage:
# docker build -t chef-dev .
# docker run -it --rm -v $(pwd):/work chef-dev
#
# With custom user:
# docker build --build-arg CUSTOM_USER=myuser -t chef-dev .
# docker run -it --rm -v $(pwd):/work chef-dev
#
# With port mapping:
# docker run -it --rm \
#   -v $(pwd):/work \
#   -p 8080:8080 \
#   chef-dev
#
# Create cookbook:
# docker run -it --rm -v $(pwd):/work chef-dev bash
# # Inside container:
# knife cookbook create my_cookbook
#
# Knife solo workflow:
# docker run -it --rm -v $(pwd):/work chef-dev bash
# # Inside container:
# knife solo init chef-repo
# cd chef-repo
# knife solo prepare user@hostname
# knife solo cook user@hostname
#
# Test Kitchen:
# docker run -it --rm \
#   -v $(pwd):/work \
#   -v /var/run/docker.sock:/var/run/docker.sock \
#   chef-dev bash
# # Inside container:
# kitchen test
#
# Run Chef recipes locally:
# docker run -it --rm -v $(pwd):/work chef-dev bash
# # Inside container:
# chef-client --local-mode --runlist 'recipe[my_cookbook]'
#
# ====================
# Security Note
# ====================
# ⚠️ Security recommendations:
# - Use specific Chef DK versions for reproducibility
# - Store sensitive data in encrypted data bags
# - Use Chef Vault for secrets management
# - Limit sudo access in production
# - Regular security updates
# - Secure Chef Server with SSL/TLS
#
# Chef Vault usage:
# - Install vault gem:
#   gem install chef-vault
#
# - Create vault item:
#   knife vault create passwords mysql -J data_bags/passwords/mysql.json
#
# - Access vault in recipe:
#   mysql_password = chef_vault_item('passwords', 'mysql')['password']
#
# Build custom image:
# docker build --build-arg CHEF_VERSION=3.4.28 -t chef-dev .
#
# Directory structure:
# chef-repo/
# ├── cookbooks/
# │   └── my_cookbook/
# │       ├── recipes/
# │       ├── attributes/
# │       ├── templates/
# │       └── metadata.rb
# ├── data_bags/
# ├── environments/
# ├── roles/
# └── .chef/
#     └── knife.rb
#
# Useful commands inside container:
# - knife cookbook list
# - knife cookbook create COOKBOOK_NAME
# - berks install (if using Berkshelf)
# - chef-client --local-mode
# - kitchen list
# - kitchen converge
#
# References:
# - Chef documentation: https://docs.chef.io/
# - Chef DK: https://docs.chef.io/workstation/
# - Knife solo: https://github.com/matschaffer/knife-solo
# - Test Kitchen: https://kitchen.ci/
