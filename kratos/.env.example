# Ory Kratos Environment Variables
# Copy this file to .env and update the values
#
# Ory Kratos is a cloud-native identity and user management system
# See: https://www.ory.sh/kratos/

# ============================================================================
# Port Configuration
# ============================================================================
KRATOS_PUBLIC_PORT=4433
# Public API port for user-facing endpoints
# Default: 4433

KRATOS_ADMIN_PORT=4434
# Admin API port for administrative operations
# Default: 4434

KRATOS_UI_PORT=4455
# Self-service UI port
# Default: 4455

MAILSLURPER_SMTP_PORT=4436
# MailSlurper SMTP port for email testing
# Default: 4436

MAILSLURPER_UI_PORT=4437
# MailSlurper web UI port
# Default: 4437

# ============================================================================
# Database Configuration
# ============================================================================
POSTGRES_USER=kratos
POSTGRES_PASSWORD=secret
# WARNING: Change this password in production!
# Use a strong, unique password (16+ characters)

POSTGRES_DB=kratos

# ============================================================================
# Kratos Configuration
# ============================================================================
DSN=sqlite:///var/lib/sqlite/db.sqlite?_fk=true&mode=rwc
# Database connection string
# SQLite (development): sqlite:///var/lib/sqlite/db.sqlite?_fk=true&mode=rwc
# PostgreSQL (production): postgres://kratos:secret@postgres:5432/kratos?sslmode=disable

LOG_LEVEL=trace
# Log level
# Options: trace, debug, info, warn, error, fatal, panic
# Production: info or warn

# ============================================================================
# UI Configuration
# ============================================================================
KRATOS_BROWSER_URL=http://127.0.0.1:4433/
# Kratos public URL for browser redirects

KRATOS_PUBLIC_URL=http://kratos:4433/
# Kratos public URL for internal service communication

COOKIE_SECRET=changeme
# Cookie encryption secret
# WARNING: Generate a random secret for production!
# Generate with: openssl rand -base64 32

CSRF_COOKIE_NAME=ory_csrf_ui
# CSRF cookie name

CSRF_COOKIE_SECRET=changeme
# CSRF cookie secret
# WARNING: Generate a random secret for production!

# ============================================================================
# Container Names
# ============================================================================
POSTGRES_CONTAINER_NAME=kratos-postgres
KRATOS_CONTAINER_NAME=kratos
KRATOS_MIGRATE_CONTAINER=kratos-migrate
KRATOS_UI_CONTAINER=kratos-ui-node
MAILSLURPER_CONTAINER=kratos-mailslurper

# ============================================================================
# Volume Names
# ============================================================================
POSTGRES_VOLUME=postgres-data
KRATOS_SQLITE_VOLUME=kratos-sqlite

# ============================================================================
# SETUP INSTRUCTIONS
# ============================================================================
# 1. Generate secrets:
#    openssl rand -base64 32
#    (Run twice for COOKIE_SECRET and CSRF_COOKIE_SECRET)
#
# 2. Update POSTGRES_PASSWORD with a strong password
#
# 3. Start services:
#    docker compose up -d
#
# 4. Access self-service UI:
#    http://localhost:4455
#
# 5. Access MailSlurper (email testing):
#    http://localhost:4437
#
# 6. Test user registration:
#    Navigate to http://localhost:4455/registration
#
# 7. Check emails in MailSlurper for verification links

# ============================================================================
# SECURITY WARNINGS
# ============================================================================
# ðŸ”’ IMPORTANT: Before deploying to production:
#
# 1. Generate unique COOKIE_SECRET and CSRF_COOKIE_SECRET
# 2. Change POSTGRES_PASSWORD to a strong password
# 3. Switch from SQLite to PostgreSQL (update DSN)
# 4. Set LOG_LEVEL to info or warn
# 5. Update KRATOS_BROWSER_URL to your actual domain
# 6. Configure proper SMTP (replace MailSlurper)
# 7. Set up SSL/TLS certificates (HTTPS)
# 8. Review Kratos security best practices
# 9. Configure proper session management
# 10. Set up rate limiting
#
# Documentation:
# https://www.ory.sh/kratos/docs/
# https://www.ory.sh/kratos/docs/guides/production
# ============================================================================
